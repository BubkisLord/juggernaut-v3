execute if score #global game_state matches 1 as @a at @s run title @s actionbar [{"text":"Total Replenishment: ","color": "dark_aqua","bold": true},{"score":{"name":"#juggernaut","objective":"replenishment_percent"},"bold": true,"color": "dark_aqua"},{"text": "%"},{"text": " [","color": "dark_aqua","bold":true},{"score":{"name":"#juggernaut","objective":"stations_completed"},"color": "dark_aqua","bold":true},{"text": "/","color": "dark_aqua","bold":true},{"score":{"name":"#juggernaut","objective":"stations_needed"},"color": "dark_aqua","bold":true},{"text": "]","color": "dark_aqua","bold":true}]

execute if score #global game_state matches 1 as @a[tag=runner] at @s run scoreboard players operation @s replenishment_mod = @s replenish_buff
execute if score #global game_state matches 1 as @a[tag=runner] at @s run scoreboard players operation @s replenishment_mod -= @s replenish_debuff

# Display actionbar for the closest station to a runner when not in chase
# When debuffed
execute if score #global game_state matches 1 as @a[tag=runner,tag=!in_chase] at @s if score @s replenish_debuff > @s replenish_buff run title @s actionbar [{"text":"Station Percentage: ","color": "red","bold": true},{"score":{"name":"@n[type=armor_stand,tag=replenishment.station,distance=..6]","objective":"replenishment_percent"},"bold": true,"color": "red"},{"text": "%"},{"text": " [","color": "red","bold":true},{"score":{"name":"#juggernaut","objective":"stations_completed"},"color": "red","bold":true},{"text": "/","color": "red","bold":true},{"score":{"name":"#juggernaut","objective":"stations_needed"},"color": "red","bold":true},{"text": "]","color": "red","bold":true},{"text": " (-","color": "red","bold": true},{"score": {"name": "@s","objective": "replenishment_mod"},"color": "red","bold": true},{"text": "% Speed","color": "red","bold": true}]
# When normal speed
execute if score #global game_state matches 1 as @a[tag=runner,tag=!in_chase] at @s if score @s replenishment_mod = #0 var run title @s actionbar [{"text":"Station Percentage: ","color": "gold","bold": true},{"score":{"name":"@n[type=armor_stand,tag=replenishment.station,distance=..6]","objective":"replenishment_percent"},"bold": true,"color": "gold"},{"text": "%"},{"text": " [","color": "gold","bold":true},{"score":{"name":"#juggernaut","objective":"stations_completed"},"color": "gold","bold":true},{"text": "/","color": "gold","bold":true},{"score":{"name":"#juggernaut","objective":"stations_needed"},"color": "gold","bold":true},{"text": "]","color": "gold","bold":true}]
# When buffed
execute if score #global game_state matches 1 as @a[tag=runner,tag=!in_chase] at @s if score @s replenish_debuff < @s replenish_buff run title @s actionbar [{"text":"Station Percentage: ","color": "green","bold": true},{"score":{"name":"@n[type=armor_stand,tag=replenishment.station,distance=..6]","objective":"replenishment_percent"},"bold": true,"color": "green"},{"text": "%"},{"text": " [","color": "green","bold":true},{"score":{"name":"#juggernaut","objective":"stations_completed"},"color": "green","bold":true},{"text": "/","color": "green","bold":true},{"score":{"name":"#juggernaut","objective":"stations_needed"},"color": "green","bold":true},{"text": "]","color": "gold","bold":true},{"text": " (+","color": "green","bold": true},{"score": {"name": "@s","objective": "replenishment_mod"},"color": "green","bold": true},{"text": "% Speed)","color": "green","bold": true}]

# Display the most progressed station to a runner when in chase (as that is what they are progressing)
# When debuffed
execute if score #global game_state matches 1 as @a[tag=runner,tag=in_chase] at @s if score @s replenish_debuff > @s replenish_buff run title @s actionbar [{"text":"Replenishment Percentage: ","color": "red","bold": true},{"score":{"name":"@n[type=armor_stand,tag=replenishment.station,tag=highest_station]","objective":"replenishment_percent"},"bold": true,"color": "red"},{"text": "%"},{"text": " [","color": "red","bold":true},{"score":{"name":"#juggernaut","objective":"stations_completed"},"color": "red","bold":true},{"text": "/","color": "red","bold":true},{"score":{"name":"#juggernaut","objective":"stations_needed"},"color": "red","bold":true},{"text": "]","color": "red","bold":true},{"score": {"name": "@s","objective": "replenishment_mod"},"color": "red","bold": true},{"text": "% Speed","color": "red","bold": true}]
# When normal speed
execute if score #global game_state matches 1 as @a[tag=runner,tag=in_chase] at @s if score @s replenishment_mod = #0 var run title @s actionbar [{"text":"Replenishment Percentage: ","color": "gold","bold": true},{"score":{"name":"@n[type=armor_stand,tag=replenishment.station,tag=highest_station]","objective":"replenishment_percent"},"bold": true,"color": "gold"},{"text": "%"},{"text": " [","color": "gold","bold":true},{"score":{"name":"#juggernaut","objective":"stations_completed"},"color": "gold","bold":true},{"text": "/","color": "gold","bold":true},{"score":{"name":"#juggernaut","objective":"stations_needed"},"color": "gold","bold":true},{"text": "]","color": "gold","bold":true}]
# When buffed
execute if score #global game_state matches 1 as @a[tag=runner,tag=in_chase] at @s if score @s replenish_debuff < @s replenish_buff run title @s actionbar [{"text":"Replenishment Percentage: ","color": "green","bold": true},{"score":{"name":"@n[type=armor_stand,tag=replenishment.station,tag=highest_station]","objective":"replenishment_percent"},"bold": true,"color": "green"},{"text": "%"},{"text": " [","color": "green","bold":true},{"score":{"name":"#juggernaut","objective":"stations_completed"},"color": "green","bold":true},{"text": "/","color": "green","bold":true},{"score":{"name":"#juggernaut","objective":"stations_needed"},"color": "green","bold":true},{"text": "]","color": "gold","bold":true},{"text": " +","color": "green","bold": true},{"score": {"name": "@s","objective": "replenishment_mod"},"color": "green","bold": true},{"text": "% Speed","color": "green","bold": true}]